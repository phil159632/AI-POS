# AI櫃台POS系統 - 待辦清單

## 認證與權限系統
- [x] 實作登入畫面(支援Google OAuth)
- [x] 實作店家創建功能(創建者自動成為店長)
- [x] 實作店家代號輸入與加入功能(自動建立店員角色)
- [x] 實作店長權限管理介面(新增/修改/刪除店內成員)

## 點餐主介面
- [x] 實作左側桌位/外帶選擇區
  - [x] 桌位清單顯示(內用桌號、外帶、外送)
  - [x] 桌位狀態顏色標示(空桌/已點/結帳中)
- [x] 實作中間菜單與點餐區
  - [x] 分類標籤(開胃菜、主餐、飲品、甜點、酒類)
  - [x] 點擊加入訂單功能
- [x] 實作右側訂單明細區
  - [x] 顯示桌號/外帶編號
  - [x] 品項清單(菜名、數量、單價、小計)
  - [x] 修改數量功能(+/-)
  - [x] 品項備註功能(不辣、加醬、不要蔥等)
  - [x] 刪除單品功能
  - [x] 顯示小計、稅金、總額
  - [x] 送單按鈕(儲存到資料庫)

## 結帳系統
- [x] 實作結帳畫面
  - [x] 顯示本桌/外帶單號明細
  - [x] 付款方式選擇(現金/銀行轉帳)
  - [x] 找零金額計算與顯示

## 訂單管理
- [x] 實作訂單查詢介面
  - [x] 依時間查詢當日訂單
  - [x] 依桌號查詢訂單
  - [x] 依狀態查詢訂單
- [x] 實作訂單修改功能

## 日結與報表
- [x] 實作每日營業額統計
  - [x] 各支付方式分類統計
- [x] 實作熱門品項統計
- [x] 實作時段銷售分析
- [ ] 實作報表導出功能(Excel/PDF)

## AI查詢介面
- [x] 實作AI自然語言查詢介面
  - [x] 支援查詢本月最暢銷品項
  - [x] 支援查詢近週業績
  - [x] 支援其他店內資料查詢

## 系統優化
- [x] 實作響應式設計(支援平板/手機)
- [x] 實作即時訂單更新
- [x] 效能優化與測試

## 新增功能需求
- [x] 建立菜單編輯頁面
  - [x] 新增/修改/刪除菜單分類
  - [x] 新增/修改/刪除菜單品項
- [x] 建立桌位編輯頁面
  - [x] 新增/修改/刪除桌位
- [x] 點餐系統支援單品金額修改
  - [x] 在訂單明細中可編輯單品價格
- [x] 修正多店家切換問題
  - [x] 確保切換店家後所有頁面都使用正確的店家ID

## 桌位編輯刪除功能修復
- [ ] 實作桌位編輯對話框UI
- [ ] 實作桌位刪除確認對話框
- [ ] 修復編輯按鈕點擊事件
- [ ] 修復刪除按鈕點擊事件

## 功能完善需求
- [ ] 完善桌位編輯和刪除功能(添加對話框和完整邏輯)
- [ ] 完善菜單分類編輯功能(替換"功能完善中"提示)
- [ ] 修改訂單查詢限制店家只查詢自己的訂單

## 訂單查詢功能改進
- [x] 在訂單查詢頁面添加餐廳選擇下拉式選單
- [ ] 用戶可選擇持有的餐廳,點選後顯示該餐廳的訂單(待修複)

## Bug修複 - 訂單查詢店家過濾(紧急)
- [x] 修複訂單查詢返回所有店家訂單的严重問題
- [x] 驗證後窯API是否正確過濾訂單
- [x] 驗證前窯API是否正確傳遞storeId參數

## UI改進需求
- [x] 在已有店家時仍顯示"創建店家"和"加入店家"選項卡

## 店家選擇狀態持久化需求
- [x] Dashboard頁面右上角下拉選單選擇店家後，進入其他頁面再返回時保持選擇
- [x] Setup頁面點選店家卡片進入Dashboard後，下拉選單顯示該店家
- [x] 實現店家選擇狀態的全局持久化（localStorage + React Context）

## UI改進 - Dashboard返回按鈕
- [x] Dashboard頁面添加返回按鈕可以回到Setup頁面

## UI改進 - 移除Made with Manus標籤
- [ ] 檢查是否可以移除右下角的"Made with Manus"標籤

## Bug修複 - 店長角色限制
- [x] 移除store-management頁面中店長角色無法被更改或删除的限制

## AI查詢功能優化
- [x] 優化ai-query頁面支持真實的自然語言對話
- [x] 實現AI可以查詢該店家的店內數據（訂單、菜單、銷售等）
- [x] 添加權限控制確保AI只能訪問當前店家的數據
- [x] 實現AI思考和分析能力回答業務相關問題

## AI查詢互動體驗優化
- [x] 優化AI正在思考時的加載動画效果
- [x] 添加更吸引人的處理中視覺反馈

## AI查詢進階功能優化
- [x] 為AI分析數據等待動畫增加取消按鈕讓使用者可以隨時中斷查詢
- [x] 在AI回復的訊息旁邊增加複製按鈕方便使用者利用分析結果
- [x] 在AI回復的訊息旁邊增加分享按鈕
- [x] 優化AI回復的視覺呈現，將關鍵指標或數據以不同顏色或粗體標示

## Reports頁面性能優化 (緊急)
- [x] 診斷Reports頁面加載慢的原因（一直轉圈）
- [x] 優化數據查詢邏輯減少加載時間
- [x] 優化前端渲染性能
- [x] 恢復到早期版本的快速加載速度

## Reports API端點修復 (緊急)
- [x] 添加report.revenue API端點到routers.ts
- [x] 添加report.topSelling API端點到routers.ts
- [ ] 修復Reports頁面無法正確取得訂單數據的問題（營業額顯示為0）

## Reports頁面回滾
- [x] 將Reports頁面回滾到版本05d7773d（早期快速版本）
- [x] 保持其他頁面不變

## 訂單查詢功能修複 (緊急)
- [x] 添加order.getById API端點到routers.ts
- [x] 修複訂單查詢的結帳功能
- [x] 測試結帳功能正常運作
- [x] 修複訂單查詢的日期篩選功能

## 訂單查詢頁面改進
- [x] 添加取消訂單按鈕
- [x] 取消訂單時顯示確認對話框
- [x] 优化日期篩選体验 - 日期变动时不立即篩選
- [x] 避免日期变动时画面闪烁
- [x] 只有点击查询按鈕才执行篩選

## 訂單查詢頁面UI排版改進
- [x] 改進取消按鈕UI - 讓排版更自然
- [x] 移除日期戠索旁邊的查詢按鈕
- [x] 整體排版改進 - 讓頁面更自然流暢

## 訂單查詢頁面按鈕和對話框優化
- [x] 取消按鈕改為紅色（destructive樣式）
- [x] 結帳對話框關閉後直接回到訂單查詢頁面


## 訂單查詢頁面對話框修複 (新增需求)
- [x] 修複結帳對話框取消後不跳訂單詳情
- [x] 將訂單取消提醒改為Alert Dialog彈出式視窗
